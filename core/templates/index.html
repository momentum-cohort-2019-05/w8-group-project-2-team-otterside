{% extends 'base.html' %}


{% block sidebar %}

{% include "snippets/sidebar.html" %}

{% endblock %}

{% block content %}
  {% if request.user.is_authenticated %}

  <div class='tc center avenir'>
      {% for obj in list_of_snippets %}
        <div class='near-black ba bw2'>
          <p class ='f3 ba bw1'>{{obj.title|title}}</p>
          <a class='f6 link mt1 dim br3 ph3 pv2 mb2 dib white bg-dark-blue' href="{% url 'edit_snippet' obj.pk %}">Edit</a>
          <a class="f6 link mt1 dim br3 ph3 pv2 mb2 dib white bg-dark-blue" href="{% url 'add_snippet' %}">Add New</a>
          <a class="f6 link mt1 dim br3 ph3 pv2 mb2 dib white bg-dark-blue" href="{{ obj.get_absolute_url }}">Delete</a>
          <button class="copy-button f6 link mt1 dim br3 ph3 pv2 mb2 dib white bg-dark-blue" data-id="{{obj.id}}" data-title="{{obj.title}}"  data-creator="{{obj.creator}}" data-date="{{obj.date_added}}" data-languages="{{obj.languages}}" data-code="{{obj.code}}" data-clipboard-target="#obj-content-{{obj.id}}"> 
            Copy Snippet</button>    
          {% if request.user not in snippet.copy_snippet.all %}
            <a href="{% url 'copy_snippet' snippet.pk %}?next={{ request.path }}">Add to User Page</a>   |   Added to Database: {{ snippet.date_added }}
          {% elif request.user in snippet.copy_snippet.all %}
            <a href="{% url 'copy_snippet' snippet.pk %}?next={{ request.path }}">Remove from User Page</a>   |   Added to Database: {{ snippet.db_date_added }}  
          {% endif %}
          <p>Language: {{obj.languages|title}} | <span>  added {{obj.date_added}}</span></p> 
        </div>
        <div class= "mw-100">
        <pre><code class='language-{{obj.languages}}'>
        <p>{{obj.code }}</p>
        </code></pre>
        </div>
      {% endfor %}
 </div>

 {% else %}
 
 <div class='center tc'>
  {% load static %}
  <img class= "br3" src="{% static 'images/otter.png' %}" alt="Otter waving">
 </div>


 {% endif %}

{% endblock %}

{% block footer %}
{% include "snippets/footer.html" %}
{% endblock %}