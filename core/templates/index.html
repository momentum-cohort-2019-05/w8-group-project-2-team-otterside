{% extends 'base.html' %}


{% block sidebar %}

<div class= "mt5 ml5 bg-blue avenir br3">
  <div class='tc center pa4'><a class="link dim white f6 f5-ns dib mr3" href="{% url 'search_list' %}">Search Code Snippets</a></div>
  {% if request.user.is_authenticated %}
  <div class="red tc center pa4">Logged in as {{ request.user|title }}</div> 
  <div class=" tc center">
  <a class="link dim white f6 f5-ns dib mr3" href="{% url 'auth_logout' %}" title="Log out">Logout</a>
  </div>
  <div class=" tc center pa4">
  <a class="link dim white f6 f5-ns dib mr3" href="{% url 'user_page' %}">User Profile Page</a>
  </div>
  <div class=" tc center pa4">
  <a class="link dim white f6 f5-ns dib mr3"  href="{% url 'snippets' %}">All Snippets</a>
  </div>
  {% else %}
  <div class=" tc center pa4">
  <a class="link dim white f6 f5-ns dib mr3" href="{% url 'auth_login' %}" title="Login">Login</a>
  </div>
  {% endif %}
</div>

{% endblock %}

{% block content %}
    {% if user.is_authenticated %}
  <div class='bg-yellow'>
      {% for obj in list_of_snippets %}
        <div class='near-black'>
          <p class ='f3'>{{obj.title|title}}</p>
          <a class='f6 link mt1 dim br3 ph3 pv2 mb2 dib white bg-dark-blue' href="{% url 'edit_snippet' obj.pk %}">Edit</a>
          <a class="f6 link mt1 dim br3 ph3 pv2 mb2 dib white bg-dark-blue" href="{% url 'add_snippet' %}">Add New</a>
          <a class="f6 link mt1 dim br3 ph3 pv2 mb2 dib white bg-dark-blue" href="{% url 'delete_snippet' %}">Delete</a>
          {% if request.user not in snippet.copy_snippet.all %}
            <a href="{% url 'copy_snippet' snippet.pk %}?next={{ request.path }}">Add to User Page</a>   |   Added to Database: {{ snippet.date_added }}
          {% elif request.user in snippet.copy_snippet.all %}
            <a href="{% url 'copy_snippet' snippet.pk %}?next={{ request.path }}">Remove from User Page</a>   |   Added to Database: {{ snippet.db_date_added }}  
          {% endif %}
          <p>Language: {{obj.languages|title}} | <span>  added {{obj.date_added}}</span></p> 
        </div>
        <div>
        <pre><code class='language-{{obj.languages}}'>
        <p>{{obj.code }}</p>
        </code></pre>
        </div>
      {% endfor %}
 </div>

 {% else %}
 
 <div class='center tc'>
  {% load static %}
  <img class= "br3" src="{% static 'images/otter.png' %}" alt="Otter waving">
 </div>


 {% endif %}

{% endblock %}