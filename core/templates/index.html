{% extends 'base.html' %}

{% block content %}
{% comment %}
<hr>
<div id="searchDiv">
<h2 id="searchHeader">Search Results: </h2>
</div>
<br>
<div id="searchResults">
  <div id="search"></div>
</div>
<hr>
{% endcomment %}

    {% if user.is_authenticated %}
  <div class='tc center avenir w-70'>
      {% for obj in list_of_snippets %}
        <div class='near-black'>
          <p class ='f3'>{{obj.title|title}}</p>
          <a class='f6 link mt1 dim br3 ph3 pv2 mb2 dib white bg-dark-blue' href="{{ obj.get_absolute_url }}">Edit</a>
          <a class="f6 link mt1 dim br3 ph3 pv2 mb2 dib white bg-dark-blue" href="{% url 'add_snippet' %}">Add New</a>
          <a class="f6 link mt1 dim br3 ph3 pv2 mb2 dib white bg-dark-blue" href="{% url 'delete_snippet' %}">Delete</a>
          {% if request.user not in snippet.copy_snippet.all %}
            <a href="{% url 'copy_snippet' snippet.pk %}?next={{ request.path }}">Add to User Page</a>   |   Added to Database: {{ snippet.date_added }}
          {% elif request.user in snippet.copy_snippet.all %}
            <a href="{% url 'copy_snippet' snippet.pk %}?next={{ request.path }}">Remove from User Page</a>   |   Added to Database: {{ snippet.db_date_added }}  
          {% endif %}
          <p>Language: {{obj.languages|title}} | <span>  added {{obj.date_added}}</span></p> 
        </div>
        <div>
        <pre><code class='language-{{obj.languages}}'>
        <p>{{obj.code }}</p>
        </code></pre>
        </div>
      {% endfor %}
 </div>

 {% else %}
 
 <div class='center tc'>
  {% load static %}
  <img class= "br3" src="{% static 'images/otter.png' %}" alt="Otter waving">
 </div>


 {% endif %}

{% endblock %}